<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WooCommerce Leon - Tienda Online</title>
    <meta name="description" content="Tienda online de WooCommerce Leon">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav-container">
            <div class="logo">
                <div class="logo-icon">W</div>
                <span>WooCommerce Leon</span>
            </div>
            <div class="nav-links">
                <a href="#products" onclick="showSection('products-section')">Productos</a>
                <a href="#cart" class="cart-link" onclick="showCart()">
                    Carrito
                    <span class="cart-count" id="cart-count">0</span>
                </a>
                <a href="#login" id="login-link" onclick="showSection('login-section')">Iniciar Sesión</a>
                <a href="#register" id="register-link" class="btn btn-primary" onclick="showSection('register-section')">Registrarse</a>
                <a href="#admin" id="admin-link" class="hidden" onclick="showSection('admin-section')">Panel Admin</a>
                <a href="#logout" id="logout-link" class="hidden" onclick="logout()">Cerrar Sesión</a>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Products Section -->
        <section id="products-section">
            <div class="text-center mb-3">
                <h1>Nuestros Productos</h1>
                <div class="mb-3">
                    <input type="text" id="search-input" placeholder="Buscar productos..." class="form-input">
                </div>
                <div class="mb-3">
                    <select id="category-filter" class="form-input">
                        <option value="">Todas las categorías</option>
                    </select>
                    <select id="sort-filter" class="form-input">
                        <option value="name">Nombre</option>
                        <option value="price-low">Precio: Menor a Mayor</option>
                        <option value="price-high">Precio: Mayor a Menor</option>
                    </select>
                </div>
            </div>
            <div id="products-grid" class="products-grid">
                <div class="text-center">Cargando productos...</div>
            </div>
        </section>

        <!-- Cart Section -->
        <section id="cart-section" class="hidden">
            <h2 class="text-center mb-3">Mi Carrito</h2>
            <div id="cart-container" class="cart-container">
                <div id="cart-empty" class="text-center">
                    <p>Tu carrito está vacío</p>
                    <a href="#products" class="btn btn-primary">Ver Productos</a>
                </div>
                <div id="cart-items">
                    <!-- Los items del carrito se cargarán dinámicamente -->
                </div>
                <div id="cart-summary" class="hidden">
                    <div class="cart-summary">
                        <div class="mb-2">
                            <strong>Subtotal:</strong> $<span id="cart-subtotal">0.00</span>
                        </div>
                        <div class="mb-2">
                            <strong>IVA (12%):</strong> $<span id="cart-tax">0.00</span>
                        </div>
                        <div class="mb-2">
                            <strong>Envío:</strong> $<span id="cart-shipping">0.00</span>
                        </div>
                        <div class="mb-3">
                            <strong>Total:</strong> $<span id="cart-total">0.00</span>
                        </div>
                    </div>
                    <div class="text-center mt-3">
                        <button class="btn btn-secondary" onclick="clearCart()">Vaciar Carrito</button>
                        <button class="btn btn-primary" onclick="checkout()">Proceder al Checkout</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Admin Section -->
        <section id="admin-section" class="hidden">
            <h2 class="text-center mb-3">Panel de Administración</h2>
            <div class="admin-container">
                <div class="admin-tabs">
                    <button class="admin-tab-btn active" onclick="showAdminTab('products')">Productos</button>
                    <button class="admin-tab-btn" onclick="showAdminTab('categories')">Categorías</button>
                    <button class="admin-tab-btn" onclick="showAdminTab('users')">Usuarios</button>
                    <button class="admin-tab-btn" onclick="showAdminTab('orders')">Pedidos</button>
                </div>
                
                <div id="admin-products" class="admin-tab-content">
                    <h3>Gestión de Productos</h3>
                    <div class="admin-actions">
                        <button class="btn btn-primary" onclick="showAddProductForm()">Agregar Producto</button>
                    </div>
                    
                    <!-- Formulario para agregar/editar productos -->
                    <div id="product-form-container" class="hidden">
                        <div class="form-container">
                            <h3 id="product-form-title">Agregar Nuevo Producto</h3>
                            <form id="product-form">
                                <input type="hidden" id="product-id">
                                
                                <div class="form-group">
                                    <label class="form-label">Nombre del Producto</label>
                                    <input type="text" id="product-name" class="form-input" required>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Slug</label>
                                    <input type="text" id="product-slug" class="form-input" required>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Descripción</label>
                                    <textarea id="product-description" class="form-input" rows="4"></textarea>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Categoría</label>
                                    <select id="product-category" class="form-input" required>
                                        <option value="">Seleccionar categoría</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Precio</label>
                                    <input type="number" id="product-price" class="form-input" step="0.01" min="0" required>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Stock</label>
                                    <input type="number" id="product-stock" class="form-input" min="0" required>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Imagen del Producto</label>
                                    <input type="file" id="product-image" class="form-input" accept="image/*">
                                    <div id="image-preview" class="image-preview hidden">
                                        <img src="" alt="Vista previa" style="max-width: 200px; max-height: 200px;">
                                    </div>
                                </div>
                                
                                <div class="form-buttons">
                                    <button type="submit" class="btn btn-primary">Guardar Producto</button>
                                    <button type="button" class="btn btn-secondary" onclick="hideProductForm()">Cancelar</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <div id="admin-products-list"></div>
                </div>
                
                <div id="admin-categories" class="admin-tab-content hidden">
                    <h3>Gestión de Categorías</h3>
                    <div class="admin-actions">
                        <button class="btn btn-primary" onclick="showAddCategoryForm()">Agregar Categoría</button>
                    </div>
                    <div id="admin-categories-list"></div>
                </div>
                
                <div id="admin-users" class="admin-tab-content hidden">
                    <h3>Gestión de Usuarios</h3>
                    <div id="admin-users-list"></div>
                </div>
                
                <div id="admin-orders" class="admin-tab-content hidden">
                    <h3>Gestión de Pedidos</h3>
                    <div id="admin-orders-list"></div>
                </div>
            </div>
        </section>

        <!-- Login Section -->
        <section id="login-section" class="hidden">
            <div class="form-container">
                <h2 class="text-center mb-3">Iniciar Sesión</h2>
                <form id="login-form">
                    <div class="form-group">
                        <label class="form-label">Correo Electrónico</label>
                        <input type="email" id="login-email" class="form-input" placeholder="tu@email.com" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Contraseña</label>
                        <input type="password" id="login-password" class="form-input" placeholder="•••••••" required>
                    </div>
                    <div class="form-buttons">
                        <button type="submit" class="btn btn-primary">Iniciar Sesión</button>
                        <a href="#register" class="btn btn-secondary">¿No tienes cuenta? Regístrate</a>
                    </div>
                </form>
            </div>
        </section>

        <!-- Register Section -->
        <section id="register-section" class="hidden">
            <div class="form-container">
                <h2 class="text-center mb-3">Crear Cuenta</h2>
                <form id="register-form">
                    <div class="form-group">
                        <label class="form-label">Nombre Completo</label>
                        <input type="text" id="register-name" class="form-input" placeholder="Juan Pérez" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Correo Electrónico</label>
                        <input type="email" id="register-email" class="form-input" placeholder="tu@email.com" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Contraseña</label>
                        <input type="password" id="register-password" class="form-input" placeholder="••••••" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Confirmar Contraseña</label>
                        <input type="password" id="register-password-confirm" class="form-input" placeholder="••••••" required>
                    </div>
                    <div class="form-buttons">
                        <button type="submit" class="btn btn-primary">Crear Cuenta</button>
                        <a href="#login" class="btn btn-secondary">¿Ya tienes cuenta? Inicia Sesión</a>
                    </div>
                </form>
            </div>
        </section>

        <!-- Loading Indicator -->
        <div id="loading" class="loading hidden"></div>

        <!-- Notifications -->
        <div id="notification" class="notification hidden"></div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2024 WooCommerce Leon. Todos los derechos reservados.</p>
        <p>
            <strong>Backend API:</strong> <a href="http://localhost:8000/api" target="_blank">http://localhost:8000/api</a>
        </p>
    </footer>

    <!-- JavaScript -->
    <script src="js/main.js"></script>
</body>
</html>